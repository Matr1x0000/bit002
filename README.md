# 社区信息管理系统

## 项目简介

社区信息管理系统是一款基于Python 3.11开发的综合性管理平台，旨在帮助社区管理人员高效管理居民、商户及物业信息，并提供全面的统计分析功能，以优化社区服务质量。

## 系统架构

系统采用经典的三层架构设计，结合前后端分离模式：

1. **表示层（前端）**：提供用户界面，负责数据展示和用户交互
   - 基于HTML/CSS/JavaScript构建Web界面
   - 使用Bootstrap 5实现响应式设计
   - 集成ECharts提供数据可视化
   - 通过HTTP请求与后端API通信

2. **应用层（后端业务逻辑）**：处理核心业务逻辑，实现各功能模块
   - Flask框架处理HTTP请求
   - 实现RESTful API接口
   - 进行权限验证和数据过滤
   - 业务逻辑处理和数据转换

3. **数据访问层**：负责与数据库交互，进行数据的增删改查操作
   - SQLAlchemy ORM框架
   - 数据访问对象（DAO）封装

4. **数据库**：本地SQLite数据库（开发环境），MySQL 8.0（生产环境）

## 功能模块设计

### 1. 登录认证模块
- 用户登录、登出、权限验证

### 2. 主页信息统计展示模块
- 各类统计数据展示（人口总数、商户总数、小区总数等）
- 图表可视化展示

### 3. 居民信息管理模块
- 居民信息的录入、查询、更新、删除
- 居民信息批量导入导出

### 4. 商户信息管理模块
- 商户信息的录入、查询、更新、删除
- 商户信息批量导入导出

### 5. 物业信息管理模块
- 物业信息的录入、查询、更新、删除

### 6. 统计分析模块
- 各类数据统计、报表生成

### 7. 系统管理模块
- 用户管理、系统配置、数据备份恢复

### 8. 基础数据维护模块
- 小区、单元、户、组别、户号、街道、行业等基础数据的管理

详见`CMS_design.md`

## 数据库设计

系统数据库采用关系型数据库设计，遵循第三范式（3NF）原则，确保数据的完整性、一致性和可扩展性。主要表结构包括：
- **居民信息表**：存储社区居民的详细信息
- **死亡人口表**：存储社区死亡人口的详细信息
- **商户信息表**：存储社区商户的详细信息
- **组别表**：存储居民所属的组别信息
- **户号表**：存储户号信息
- **小区表**：存储小区信息
- **单元表**：存储单元信息
- **户表**：存储户信息
- **街道表**：存储街道信息
- **行业表**：存储行业信息
- **管理员账户表**：存储系统管理员信息
- **物业信息表**：存储物业信息
- **物业辖区表**：存储物业辖区信息

表间关系：
- **居民信息表** 与 **组别表**：多对一关系
- **居民信息表** 与 **户号表**：多对一关系
- **居民信息表** 与 **小区表**：多对一关系
- **居民信息表** 与 **单元表**：多对一关系
- **居民信息表** 与 **户表**：多对一关系
- **单元表** 与 **小区表**：多对一关系
- **户表** 与 **单元表**：多对一关系
- **户号表** 与 **组别表**：多对一关系
- **商户信息表** 与 **街道表**：多对一关系
- **商户信息表** 与 **行业表**：多对一关系
- **物业辖区表** 与 **物业信息表**：多对一关系
- **物业辖区表** 与 **小区表**：一对一关系

详见`CMS_db_design.md`

## 技术栈选择

### 后端技术
1. **核心语言**：Python 3.11
2. **Web框架**：Flask 2.0+
3. **ORM框架**：SQLAlchemy 2.0+
4. **数据库**：SQLite 3（开发环境）/ MySQL 8.0（生产环境）
5. **身份验证**：JWT (PyJWT)、Passlib
6. **数据处理**：Pandas 1.5+, NumPy 1.23+
7. **图表生成**：Matplotlib 3.7+, Seaborn 0.12+
8. **Windows集成**：pywin32

### 前端技术
1. **基础技术**：HTML5、CSS3、JavaScript (ES6+)
2. **UI框架**：Bootstrap 5.2+
3. **数据可视化**：ECharts 5.4+
4. **前端交互**：jQuery 3.6+

### 开发与部署工具
1. **版本控制**：Git
2. **代码编辑器/IDE**：PyCharm、Visual Studio Code

详见`CMS_technical.md`

## 项目结构

```
community_management_system/
├── app/
│   ├── __init__.py          # 应用初始化
│   ├── config.py            # 配置文件
│   ├── models/              # 数据模型
│   │   ├── __init__.py
│   │   ├── resident.py      # 居民模型
│   │   ├── business.py      # 商户模型
│   │   └── ...              # 其他模型
│   ├── api/                 # API接口
│   │   ├── __init__.py
│   │   ├── auth.py          # 认证接口
│   │   ├── residents.py     # 居民接口
│   │   ├── businesses.py    # 商户接口
│   │   └── ...              # 其他接口
│   ├── services/            # 业务服务
│   │   ├── __init__.py
│   │   ├── auth_service.py  # 认证服务
│   │   ├── resident_service.py # 居民服务
│   │   └── ...              # 其他服务
│   ├── utils/               # 工具函数
│   │   ├── __init__.py
│   │   ├── jwt_helper.py    # JWT工具
│   │   ├── excel_helper.py  # Excel处理工具
│   │   └── ...              # 其他工具
│   └── static/              # 静态资源
│       ├── css/
│       ├── js/
│       └── img/
├── templates/               # HTML模板
├── migrations/              # 数据库迁移脚本
├── tests/                   # 测试代码
├── main.py                  # 项目入口
├── requirements.txt         # 项目依赖
└── README.md                # 项目说明
```

## 安装与配置

### 开发环境配置

1. **安装Python 3.11**
   - 从[Python官网](https://www.python.org/downloads/)下载并安装Python 3.11
   - 确保将Python添加到系统环境变量

2. **创建虚拟环境**
   ```bash
   python -m venv .venv
   ```

3. **激活虚拟环境**
   - Windows:
     ```bash
     .venv\Scripts\activate
     ```
   - macOS/Linux:
     ```bash
     source .venv/bin/activate
     ```

4. **安装项目依赖**
   ```bash
   pip install -r requirements.txt
   ```

5. **运行应用**
   ```bash
   python main.py
   ```

6. **访问系统**
   打开浏览器，访问：`http://localhost:5000`

### 生产环境配置

1. **配置MySQL数据库**
   - 安装MySQL 8.0
   - 创建数据库和用户
   - 授予必要的权限

2. **配置环境变量**
   创建`.env`文件，添加以下配置：
   ```
   SECRET_KEY=your-secret-key
   JWT_SECRET_KEY=your-jwt-secret-key
   DATABASE_URL=mysql+pymysql://username:password@localhost/community_db
   FLASK_ENV=production
   FLASK_DEBUG=False
   ```

3. **使用Gunicorn作为WSGI服务器**
   ```bash
   pip install gunicorn
   gunicorn -w 4 -b 0.0.0.0:5000 "main:app"
   ```

4. **配置Nginx作为反向代理**
   设置Nginx配置文件，将请求转发到Gunicorn

5. **配置HTTPS**
   使用SSL证书配置HTTPS访问

## 登录信息

默认管理员账号：
- 用户名：admin
- 密码：password

**注意**：首次登录后，请及时修改管理员密码。

## 功能特点

1. **全面的信息管理**：支持居民、商户、物业等各类信息的录入、查询、更新和删除
2. **强大的统计分析**：提供多维度的数据统计和可视化图表展示
3. **安全可靠**：采用JWT认证、密码加密存储等多重安全机制
4. **用户友好**：界面简洁直观，操作便捷
5. **响应式设计**：适配不同屏幕尺寸的设备
6. **数据导入导出**：支持批量数据导入导出，提高工作效率
7. **系统管理**：支持用户管理、系统配置、数据备份恢复等功能

## 系统要求

### 硬件要求
- 处理器：Intel Core i3及以上
- 内存：4GB及以上
- 硬盘空间：10GB及以上可用空间

### 软件要求
- 操作系统：Windows 7/10/11、Linux、macOS
- 浏览器：Chrome 90+、Firefox 88+、Safari 14+、Edge 90+

## 联系方式

如有问题或建议，请联系项目负责人：

- 邮箱：[example@email.com]
- 电话：[联系方式]
